{% extends "base.html.twig" %}
{% block title %}EliminarUsuarios{% endblock %}
{% block section %}
{% if usuario_destroy == true %}
	<div class="card mb-3">
		<div class="card-header">
			<div class="text-center">
				<h2>Usuarios</h1>
			</div>
		</div>

		  {% if error == 'sistema' %}
			<p class='alert-danger'>*Ocurrio un incoveniente con el sistema, por favor vuelva a intentar m√°s tarde.</p>
	  	  {% endif %}

	<div class="card-body">
			<div class="row">
			<form class="form-inline my-2 my-lg-0 mr-lg-2" action='eliminarUsuarios.php'>
				<div class="input-group">
					<input class="form-control" type="text" name='buscar' placeholder="Buscar...">
				</div>
					<div class="input-group">
						<span class="input-group-btn">
							<button class="btn btn-primary" type="submit" name='activo' value=0>
								Activos y NoActivos
							</button>
						</span>
					</div>
					<div class="input-group">
						<span class="input-group-btn">
							<button class="btn btn-primary" type="submit" name='activo' value=1>
								Activos
							</button>
						</span>
					</div>
					<div class="input-group">
						<span class="input-group-btn">
							<button class="btn btn-primary" type="submit" name='activo' value=2>
								NoActivos
							</button>
						</span>
					</div>
			</form>
			</div>
		</div>
			<div class="table-responsive">
				<table class="table table-bordered" id="dataTable" width="100%" cellspacing="0">
					<tr>
						<th>ID</th>
						<th>Username</th>
						<th>Roles</th>
						<th>Estado</th>
			   			<th>Opcion</th>
					</tr>
					{% for item in resources %}
						<form action="/PHPScript/eliminarUsuarioScript.php" method="post">
							<tr>
								<th><input type="hidden" name="id" value="{{ item.id }}">{{ item.id }}</th>
								<th><input type="hidden" name="username" value="{{ item.username }}">{{ item.username }}</th>
								<th>{% for rol in item.roles %} {{ rol }} <br>{% endfor %} </th>
								<th><input type="hidden" name="id" value="{{ item.estado }}">
									{% if item.estado == 1 %}Activo
									{% else %} No Activo
									{% endif %}
								</th>
								<th>
									<button type="submit" formaction="/PHPScript/buscarModificarUsuario.php" class="btn btn-primary btn-sm" ><p  class="fa fa-pencil-square-o" aria-hidden="true">Modificar</p></button>
									<button type="submit" formaction="/PHPScript/buscarAsignarRoles.php" class="btn btn-primary btn-sm" ><p class="fa fa-id-card">Asignar Roles</p></button>
									<button type="submit" formaction="/PHPScript/cambiarEstadoDelUsuario.php" class="btn btn-primary btn-sm" >
										{% if item.estado == 1 %}<p class="fa fa-times" aria-hidden="true">Desactivar</p></button> 
										{% else %} <p class="fa fa-check-circle-o" aria-hidden="true">Activar</p></button>
										{% endif %}
									<button type="submit" class="btn btn-primary btn-sm" ><p class="fa fa-trash">Eliminar</p></button>
								
								</th>
							</tr>
						</form>
					{% endfor %}
				</table>
				<ul class="pagination">
					<li class="page-item"><a class="page-link" href="{{prevPage}}">&laquo;</a></li>
					{% for pagina in paginas %}
						 <li class="page-item"><a class="page-link" href="{{ pagina.page }}"> {{ pagina.num }}</a></li>
					{% endfor %}
					<li class="page-item"><a class="page-link "  href="{{sigPage}}">&raquo;</a></li>
				</ul>
			</div>
		</div>
	</div>
{% endif %}
{% endblock %}

